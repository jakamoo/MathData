<!DOCTYPE html>
<html>

	<head>
		<meta charset = "utf-8">
        <meta name = "viewport" content = "width = device-width , intial-scale=1.0">
        <meta http-equiv = "X-UA-compatible" content = "ie=edge">
        <title> Create </title>
		<style>
		::placeholder {
			color: blue;
			opacity: 1; /* Firefox */
		}

		:-ms-input-placeholder { /* Internet Explorer 10-11 */
		   color: blue;
		}

		::-ms-input-placeholder { /* Microsoft Edge */
		   color: blue;
		}
		</style>
	</head>

<body>

<div align="center" id="selection">
	<!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>
    <!–                               		web page login  												–>
	<!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>
	<p style = "font-size:20px" >Hi,Welcome to MathData project</p>
	<p style = "font-size:20px" >Select the action you want to do</p>
    <!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~->
	<!–# operations to be performed 																	    #->
    <!–# If the user selects one of these functions, the div specified by this selectiion id disappears and #->
    <!–#	new elements are displayed according to the selected operation                                  #->
    <!–#~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>
	<button type="submit" style="font-size:20px ; background-color: yellow" onclick="addOperation()">Add</button>
	<button type="submit" style="font-size:20px ; background-color: yellow" onclick="deleteOperation()">Delete</button>
	<button type="submit" style="font-size:20px ; background-color: yellow" onclick="editOperation()">Edit</button>
	<button type="submit" style="font-size:20px ; background-color: yellow" onclick="showOperation()">Show</button>
</div>


<form enctype = "application/x-www-form-urlencoded" action="/datatypes" type="submit"  method="post"  onsubmit="return check()" id ="uploadButton" >

Datatype:<input id="example" type="text" name="username" placeholder="Like this graph,polynom....." >
		 <button id="uploadButton" type="submit" onclick="uploadFunction()">update</button>
         <i id="resultField"  name = "jsonFile"></i>
</form>

<div id="create"><br>

Raw :  <i id ="saved" ></i>
	<!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>
    <!–											Choosing                                                    –>
    <!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>
	<button id = "dense" type="submit" onclick="denseFunction()"  >Dense</button>
    <button id = "sparse"type="submit" onclick="sparseFunction()"  >Sparse</button>
    <!–#####################################################################################################–>


    <!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>
    <!–											dense part                                                  –>
    <!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>
    <form  type="submit" onsubmit="return checkDenseInput()">
    	<input type="text" onkeypress="isInputNumber(event)" id="denseInput"/><i id ="warningForDenseNodeSize" ></i>
    </form>

    <input id = "hidden_elements1" type="button" value="Enter a node size" onclick="add()" onsubmit = "return false"/>
	<form id="inputField"  onsubmit = "return false"></form>
    <!–#####################################################################################################–>


	<!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>
    <!–											sparse part                                                 –>
    <!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>
    <form  type="submit" onsubmit="return checkSparseInput()">
    	<input type="text" onkeypress="isInputNumber(event)" id = "sparseInput" ><i id ="warningForSparseNodeSize" ></i>
    </form>

    <input id = "hiddenButton" type="button" value="Enter a node size" onclick="add1()"/>
	<input id="listNode" size="100" placeholder="(x...,x...),(x...,x...)..." onkeypress="this.value=fixInputPattern(this.value)"/>
    <input id = "hiddensave" type="button" value="saveee" onclick="saving()"/><br>
    <!–#####################################################################################################–>


Typeset  : <input type="text" id="Typeset" name="valueOfTypeset"/><i id ="warning3" ></i><br><br>

Features : Directed :<select id="mySelect" size="1">
                        <option></option>
                        <option>True</option>
                        <option>False</option>
					 </select>


</div>

<div id="remove"><br>
   <form  type="submit" onsubmit="return checkShakeyForRemoveInut()">
			sha : <input size = "37" type="text" id="denseInput"/><i id ="warningForDenseNodeSize" ></i>
	</form>
</div>



<i id="control"></i>


<script>
var myArray = [];
var file = {};
//##################################
//------    OPERATIONS       ------#
//------    1. add           ------#
//------    2. remove        ------#
//------    3. edi           ------#
//------    4. show          ------#
//##################################
var operations = 0;

function checkShakeyForRemoveInut(){

	if(document.getElementById("denseInput").value == ""){
		return false;
	}

	return true;
}



function isInputNumber(evt){

    var ch = String.fromCharCode(evt.which);

    if(!(/[0-9]/.test(ch))){
      	evt.preventDefault();
    }
}


//<!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>//
//<!–                             selection functions                                                     –>//
//<!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>//
function addOperation(){
	document.getElementById("selection").style.display="none";
    document.getElementById("uploadButton").style.display="block";
	operations = 1;
}
function deleteOperation(){
	document.getElementById("remove").style.display="block"; // first of all div is hidden
															 // Paragraph becomes visible after the UPLOAD button is pressed
	document.getElementById("selection").style.display="none";
    document.getElementById("uploadButton").style.display="block";
	operations = 2;
}
function editOperation(){
	document.getElementById("selection").style.display="none";
    document.getElementById("uploadButton").style.display="block";
	operations = 3;
}
function showOperation(){
	document.getElementById("selection").style.display="none";
    document.getElementById("uploadButton").style.display="block";
	operations = 4;
}
//<!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>//
//<!–~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~–>//

function checkDenseInput() {

        if(document.getElementById("denseInput").value == ""){
            return false;
        }
        return true;
}

function checkSparseInput() {

        if(document.getElementById("sparseInput").value == ""){
            return false;
        }
        return true;
}

window.onload=function() {

	document.getElementById("remove").style.display="none";
	document.getElementById("uploadButton").style.display="none";
  	document.getElementById("create").style.display="none";
  	//document.getElementById("resultField").style.display="none";
  	document.getElementById("denseInput").style.display="none";
  	document.getElementById("hidden_elements1").style.display="none";
  	document.getElementById("sparseInput").style.display="none";
  	document.getElementById("hiddenButton").style.display="none";
  	document.getElementById("listNode").style.display="none";
  	document.getElementById("hiddensave").style.display="none";
}


function saving() {
	document.getElementById("listNode").style.display="none";
    document.getElementById("hiddensave").style.display="none";
	var str = document.getElementById("listNode").value;
	document.getElementById("saved").innerHTML = "The values were  recorded";
	file.raw.sparse = str;

}
var denseNodeSize ;
function add() {
	if(document.getElementById("denseInput").value == ""){
         document.getElementById("warningForDenseNodeSize").innerHTML = "Please,Enter a number for node size...";
    }
    else{
      document.getElementById("warningForDenseNodeSize").innerHTML = "";
      document.getElementById("denseInput").style.display="none";
      document.getElementById("hidden_elements1").style.display="none";

      denseNodeSize = document.getElementById("denseInput").value ;
      var matrixSize = denseNodeSize * denseNodeSize;
      var rawNumber = -1;
      for (var i = 0; i < matrixSize; i++) {

          if( (i % denseNodeSize) == 0){
              rawNumber += 1;
              var br = document.createElement("br");
              var element = document.getElementById("inputField");
              element.appendChild(br);
          }
          //Create an input type dynamically.
          var element = document.createElement("input");

          //Assign different attributes to the element.
          element.setAttribute("type", "number");
          element.setAttribute("value", "0");
          element.setAttribute("name","" + rawNumber);
          element.setAttribute("min", "0");
          element.setAttribute("max", "1");


          var foo = document.getElementById("inputField");

          //Append the element in page (in form).
          foo.appendChild(element);
     }

         //Create an input type dynamically.
          var elem = document.createElement("input");

          //Assign different attributes to the element.
          elem.setAttribute("type", "button");
          elem.setAttribute("value", "save");
          elem.setAttribute("onclick", "printScreen()");

          var fooo = document.getElementById("inputField");

          //Append the element in page (in form).
          fooo.appendChild(elem);
       }


}


function printScreen() {
	document.getElementById("inputField").style.display="none";
  	var controlBox = 1;
    var myArr = document.forms.inputField;
    var myControls = myArr;
    var name_value_array = [];
    var rawNumber = -1;
	var txt = "";
    var col  = document.getElementById("denseInput").value ;
    for (var i = 0; i < myControls.length; i++) {
    	if( (i % denseNodeSize) == 0){
        	rawNumber += 1;
        }
		var aControl = myControls[i];

		// don't print the button value
		if (aControl.type != "button") {
			// store value in a map
			if(aControl.value == 1)
			{

				var str = "(" + aControl.name + ","  + i%col + ")";
				txt += str + "";
				name_value_array.push(str);
			}

			if(aControl.value>1){
				controlBox = 0
			}
		}

    }

	document.getElementById("saved").innerHTML = "The values were  recorded";

	file.raw.dense = txt;
}









function denseFunction() {
	document.getElementById("dense").style.display="none";
	document.getElementById("sparse").style.display="none";
	document.getElementById("denseInput").style.display="block";
	document.getElementById("hidden_elements1").style.display="block";
}
function sparseFunction() {
	document.getElementById("dense").style.display="none";
	document.getElementById("sparse").style.display="none";
	document.getElementById("hiddenButton").style.display="block";
	document.getElementById("sparseInput").style.display="block";

}


function add1() {
	if(document.getElementById("sparseInput").value == ""){
         document.getElementById("warningForSparseNodeSize").innerHTML = "Please,Enter a number for node size...";
    }
    else{
      	document.getElementById("warningForSparseNodeSize").innerHTML = "";
      	document.getElementById("sparseInput").style.display="none";
      	document.getElementById("hiddenButton").style.display="none";

      	nodeSize = document.getElementById("sparseInput").value;
      	nodeSizeLength = nodeSize.length;
      	document.getElementById("listNode").style.display="block";
      	document.getElementById("hiddensave").style.display="block";
   }
}
var nodeSize;
var startNumber=1;
var lastCharacter = 0;// eğer son sayıdan önceki karakter , ise
var nodeSizeLength;

function fixInputPattern(currInp) {


    var currentInput = currInp;
    var currentLength = currentInput.length;
    var lastNumberEntered = currentInput[currentLength - 1];
    var numberEntered = currentInput[currentLength];


    if (!isNumber(lastNumberEntered) && lastNumberEntered != "," && lastNumberEntered != ")" &&  lastNumberEntered != "(" ) {
      	return currentInput.substring(0, currentLength-1);
    }

	if(currentInput[currentLength] == ")"){
		lastCharacter = 0;
    	startNumber = currentLength+1;
    	return currentInput.substring(0, currentLength) +"(";
    }


    if (currentLength == 0) {
    	lastCharacter = 0;
        startNumber=1;
      	return "(" + currentInput.substring(0, currentLength) ;
    }

    if (currentLength == 1 && isNumber(lastNumberEntered) && nodeSize <=9) {
    	startNumber=3;
        lastCharacter = 1;
      	return "(" + currentInput.substring(0, currentLength) +"," ;
    }

    if (currentLength == 1 && isNumber(lastNumberEntered) && nodeSize > 9) {
    	startNumber=1;
        lastCharacter = 0;
      	return "(" + currentInput.substring(0, currentLength);
    }

    if (lastNumberEntered == ")") {
    	startNumber = currentLength+1;
        lastCharacter = 0;
      	return currentInput.substring(0, currentLength) +"(";
    }



    if(currentInput.lastIndexOf(",") < currentInput.lastIndexOf("(") ){
    	lastCharacter = 0;
    	startNumber = currentInput.lastIndexOf("(")+1;
    }

    if(currentInput.lastIndexOf(",") > currentInput.lastIndexOf("(") ){
    	lastCharacter = 1;
    	startNumber = currentInput.lastIndexOf(",")+1;
    }



    if (lastNumberEntered == ",") {
    	startNumber = currentLength;
        lastCharacter = 1;
      	return currentInput.substring(0, currentLength);
    }


    if (currentLength > nodeSize*nodeSize ) {
      return currentInput.substring(0,nodeSize*nodeSize);
    }


    if(nodeSize <=9){


        if(lastNumberEntered > nodeSize ){
        	return currentInput.substring(0, currentLength-1)
        }


    	if(lastCharacter == 0 && numberEntered <= nodeSize ){
        	document.getElementById("warningForDenseNodeSize").innerHTML = lastNumberEntered;
        	lastCharacter = 1;
    		return currentInput.substring(0, currentLength) + ",";
        }


      	if(lastCharacter == 1 && numberEntered <= nodeSize ){
        	lastCharacter = 0;
    		return currentInput.substring(0, currentLength) + ")(";
        }

    }

    var controlNumber = currentInput.substring(startNumber, currentLength);
  	if(Number(controlNumber) <= nodeSize && controlNumber.length == nodeSizeLength )
  	{
    	if(lastCharacter == 0){
        	lastCharacter = 1;
            startNumber = currentLength + 1;
    		return currentInput.substring(0, currentLength) + ",";
        }

    	if(lastCharacter == 1){
        	lastCharacter = 0;
            startNumber = currentLength + 2;
    		return currentInput.substring(0, currentLength) + ")(";
        }

    }

    if(Number(controlNumber) > nodeSize){
    	return currentInput.substring(0, startNumber);
    }


    return currentInput;
}



function isNumber(n) {
    return !isNaN(parseFloat(n)) && isFinite(n);
}



var x = 0; // global variable for control
function uploadFunction() {

	if( operations == 1){  // If the button is pressed without inputting anything
		if(x == 0){
			document.getElementById("create").style.display="block"; // first of all div is hidden
																// Paragraph becomes visible after the UPLOAD button is pressed
			x++;
			file = {
				'datatype'       : '',
			}
			file['raw'] = {"dense" : " ",
						   "sparse":" ",}

			file['typeset'] = "";
			file['features'] = {'directed' : "",}
		}
		else{

			if(document.getElementById("example").value == ""){
				document.getElementById("example").value = "graph"; // assigned a file to the box
			}

			file['datatype'] = document.getElementById("example").value ;


			if(document.getElementById("Typeset").value == ""){
				document.getElementById("warning3").innerHTML = " Wrong input,you can write like this type1, type2, ....";
			}

			if(document.getElementById("Typeset").value != ""){
				document.getElementById("warning3").innerHTML = "";
				file.typeset = document.getElementById("Typeset").value;
			}

			file.features.directed = document.getElementById("mySelect").value;

			//myArray.push(file);
			//document.getElementById("warning3").innerHTML = "";
			//document.getElementById("resultField").value = JSON.stringify(file);
			if( document.getElementById("Typeset").value != "" && document.getElementById("mySelect").value != "" && document.getElementById("saved").value != ""){
				document.getElementById("resultField").appendChild(document.createTextNode(JSON.stringify(file)));
			}
		}
	}
	else if(operations == 2 ){

		if(document.getElementById("example").value != ""){
			file = {
				'datatype'       : '',
				'sha'			 : '',
			}
		}

		if( document.getElementById("example").value != "" && document.getElementById("denseInput").value != ""){
			file.datatype = document.getElementById("example").value;
			file.sha = document.getElementById("denseInput").value;

			document.getElementById("resultField").appendChild(document.createTextNode(JSON.stringify(file)));
		}
	}
}

function check() {

        if(document.getElementById("Typeset").value == ""){
            return false;
        }
        if(document.getElementById("mySelect").value == ""){
            return false;
        }
        if(document.getElementById("saved").value == ""){
            return false;
        }

        return true;

}
</script>

</body>
</html>